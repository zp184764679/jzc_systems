====================================================
é‡‡è´­ç³»ç»Ÿ - æœ€ç»ˆé…ç½®æ€»ç»“
æ›´æ–°æ—¶é—´: 2025-11-07 21:35
====================================================

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. æ•°æ®åº“é…ç½®æ›´æ–° âœ…
Backendé…ç½®æ–‡ä»¶: backend/.env
æ•°æ®åº“ç”¨æˆ·: exzzz (å·²ä» caigou_admin æ›´æ–°)
æ•°æ®åº“å¯†ç : exak472008 (å·²ä» caigou2025!@# æ›´æ–°)
æ•°æ®åº“å: caigou_local
è¿æ¥: mysql+pymysql://exzzz:exak472008@localhost:3306/caigou_local

SQLè„šæœ¬å·²æ›´æ–°: setup_mysql_local.sql
Pythonè„šæœ¬å·²æ›´æ–°: create_database.py
æµ‹è¯•è„šæœ¬: test_mysql_connection.py

### 2. ç½‘ç»œé…ç½®åˆ†æ âœ…
âœ“ Ethernet (192.168.0.6)
  - ç”¨é€”: æ—¥å¸¸ä½¿ç”¨
  - å¸¦å®½: 2000m
  - ç½‘å…³: 192.168.1.1
  - ä¼˜å…ˆçº§: å°†è®¾ç½®ä¸º 1 (æœ€é«˜)

âœ“ Ethernet 4 (192.168.5.125)
  - ç”¨é€”: æœåŠ¡å™¨
  - å…¬ç½‘IP: 61.145.212.28
  - ç½‘å…³: 192.168.5.1
  - ä¼˜å…ˆçº§: å°†è®¾ç½®ä¸º 10

### 3. é…ç½®è„šæœ¬åˆ›å»º âœ…
âœ“ é…ç½®ç½‘ç»œä¼˜å…ˆçº§.ps1 - è‡ªåŠ¨è®¾ç½®ç½‘ç»œä¼˜å…ˆçº§å’Œé˜²ç«å¢™
âœ“ ä¿®æ”¹MySQLé…ç½®.ps1 - ä¿®æ”¹my.iniæ·»åŠ bind-address
âœ“ ä¸€é”®å®Œæ•´é…ç½®.bat - ç»¼åˆé…ç½®è„šæœ¬

## ğŸš€ ä¸€é”®å®Œæ•´é…ç½®æ­¥éª¤

### æ–¹æ³•: è¿è¡Œç»¼åˆé…ç½®è„šæœ¬ (æ¨è)

åŒå‡»è¿è¡Œ: "ä¸€é”®å®Œæ•´é…ç½®.bat"

å°†è‡ªåŠ¨å®Œæˆ:
[1] è®¾ç½®ç½‘ç»œä¼˜å…ˆçº§
    - Ethernet: ä¼˜å…ˆçº§ 1 (æ—¥å¸¸ä½¿ç”¨)
    - Ethernet 4: ä¼˜å…ˆçº§ 10 (æœåŠ¡å™¨)

[2] é…ç½®Windowsé˜²ç«å¢™
    - MySQL: 3306
    - Backend: 5001
    - Frontend: 3000

[3] åˆ›å»ºMySQLæ•°æ®åº“
    - æ•°æ®åº“: caigou_local
    - ç”¨æˆ·: exzzz@localhost
    - ç”¨æˆ·: exzzz@192.168.0.%
    - ç”¨æˆ·: exzzz@172.%
    - ç”¨æˆ·: exzzz@%
    - å¯†ç : exak472008

[4] ä¿®æ”¹MySQLé…ç½®
    - bind-address = 0.0.0.0
    - mysqlx-bind-address = 0.0.0.0

[5] é‡å¯MySQLæœåŠ¡

[6] æµ‹è¯•æ•°æ®åº“è¿æ¥

## ğŸ“Š é…ç½®ä¿¡æ¯æ‘˜è¦

### æ•°æ®åº“
æ•°æ®åº“å: caigou_local
ç”¨æˆ·å: exzzz
å¯†ç : exak472008
ç«¯å£: 3306

### ç½‘ç»œæ¥å£
æ—¥å¸¸ç½‘ç»œ: Ethernet (192.168.0.6)
æœåŠ¡å™¨ç½‘ç»œ: Ethernet 4 (192.168.5.125 -> 61.145.212.28)

### å¤–ç½‘è®¿é—®åœ°å€
Backend API: http://61.145.212.28:5001
Frontend: http://61.145.212.28:3000
MySQL: 61.145.212.28:3306

### å†…ç½‘è®¿é—®åœ°å€
Backend API: http://192.168.0.6:5001 æˆ– http://192.168.5.125:5001
Frontend: http://192.168.0.6:3000 æˆ– http://192.168.5.125:3000
MySQL: 192.168.0.6:3306 æˆ– 192.168.5.125:3306

## ğŸ”§ æ‰‹åŠ¨é…ç½®æ­¥éª¤ (å¦‚æœä¸€é”®è„šæœ¬å¤±è´¥)

### æ­¥éª¤1: è®¾ç½®ç½‘ç»œä¼˜å…ˆçº§
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒPowerShell,æ‰§è¡Œ:
```powershell
# æŸ¥çœ‹å½“å‰ä¼˜å…ˆçº§
Get-NetIPInterface -AddressFamily IPv4 | Where-Object {$_.InterfaceAlias -match 'Ethernet'} | Format-Table

# è®¾ç½®Ethernetä¼˜å…ˆçº§ä¸º1
Set-NetIPInterface -InterfaceAlias "Ethernet" -InterfaceMetric 1

# è®¾ç½®Ethernet 4ä¼˜å…ˆçº§ä¸º10
Set-NetIPInterface -InterfaceAlias "Ethernet 4" -InterfaceMetric 10
```

### æ­¥éª¤2: é…ç½®é˜²ç«å¢™
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦,æ‰§è¡Œ:
```cmd
netsh advfirewall firewall add rule name="MySQL Port 3306" dir=in action=allow protocol=TCP localport=3306
netsh advfirewall firewall add rule name="Backend API Port 5001" dir=in action=allow protocol=TCP localport=5001
netsh advfirewall firewall add rule name="Frontend Port 3000" dir=in action=allow protocol=TCP localport=3000
```

### æ­¥éª¤3: åˆ›å»ºæ•°æ®åº“
```cmd
cd C:\Users\Admin\Desktop\é‡‡è´­\éƒ¨ç½²å·¥å…·
mysql -u root -pexak472008 < setup_mysql_local.sql
```

### æ­¥éª¤4: ä¿®æ”¹MySQLé…ç½®
ç¼–è¾‘æ–‡ä»¶: C:\ProgramData\MySQL\MySQL Server 9.0\my.ini
åœ¨ [mysqld] éƒ¨åˆ†æ·»åŠ :
```ini
bind-address = 0.0.0.0
mysqlx-bind-address = 0.0.0.0
```

### æ­¥éª¤5: é‡å¯MySQL
```cmd
net stop MySQL90
net start MySQL90
```

### æ­¥éª¤6: æµ‹è¯•è¿æ¥
```cmd
cd C:\Users\Admin\Desktop\é‡‡è´­\éƒ¨ç½²å·¥å…·
python test_mysql_connection.py
```

## ğŸ” å®‰å…¨é…ç½®å»ºè®®

1. è·¯ç”±å™¨ç«¯å£æ˜ å°„:
   ç¡®ä¿è·¯ç”±å™¨å·²é…ç½®:
   - å¤–ç½‘ 61.145.212.28:3306 -> å†…ç½‘ 192.168.5.125:3306 (MySQL)
   - å¤–ç½‘ 61.145.212.28:5001 -> å†…ç½‘ 192.168.5.125:5001 (Backend)
   - å¤–ç½‘ 61.145.212.28:3000 -> å†…ç½‘ 192.168.5.125:3000 (Frontend)

2. MySQLå®‰å…¨:
   - é™åˆ¶è¿œç¨‹è®¿é—®çš„IPèŒƒå›´
   - ä½¿ç”¨å¼ºå¯†ç  (å½“å‰: exak472008)
   - è€ƒè™‘é…ç½®SSLåŠ å¯†è¿æ¥

3. Backendå®‰å…¨:
   - ç¡®ä¿Flaskè¿è¡Œåœ¨ç”Ÿäº§æ¨¡å¼ (FLASK_ENV=production)
   - æ›´æ–°SECRET_KEYå’ŒJWT_SECRET_KEY
   - å¯ç”¨HTTPS (é…ç½®SSLè¯ä¹¦)

## ğŸ“ Backendå¯åŠ¨é…ç½®

ç¡®ä¿Backendç›‘å¬åœ¨æ‰€æœ‰æ¥å£:
```python
# app.py
if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5001)
```

æˆ–ä½¿ç”¨Gunicorn:
```bash
gunicorn -w 4 -b 0.0.0.0:5001 app:app
```

## ğŸ§ª æµ‹è¯•å¤–ç½‘è®¿é—®

### æµ‹è¯•MySQL
ä»å¤–ç½‘æœºå™¨:
```bash
mysql -h 61.145.212.28 -u exzzz -pexak472008 caigou_local
```

### æµ‹è¯•Backend
ä»æµè§ˆå™¨è®¿é—®:
http://61.145.212.28:5001/api/v1/health
æˆ–
curl http://61.145.212.28:5001/api/v1/health

### æµ‹è¯•Frontend
ä»æµè§ˆå™¨è®¿é—®:
http://61.145.212.28:3000

## âš ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: å¤–ç½‘æ— æ³•è®¿é—®
æ£€æŸ¥:
1. è·¯ç”±å™¨ç«¯å£æ˜ å°„æ˜¯å¦æ­£ç¡®
2. Windowsé˜²ç«å¢™æ˜¯å¦å…è®¸ç«¯å£
3. Backendæ˜¯å¦ç›‘å¬åœ¨ 0.0.0.0
4. MySQLæ˜¯å¦é…ç½® bind-address = 0.0.0.0

### é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥
æ£€æŸ¥:
1. MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡® (exzzz / exak472008)
3. æ•°æ®åº“caigou_localæ˜¯å¦å­˜åœ¨
4. é˜²ç«å¢™æ˜¯å¦å…è®¸3306ç«¯å£

### é—®é¢˜3: ç½‘ç»œä¼˜å…ˆçº§é—®é¢˜
æ£€æŸ¥:
```powershell
Get-NetIPInterface -AddressFamily IPv4 | Format-Table InterfaceAlias, InterfaceMetric
```
Metricå€¼è¶Šå°,ä¼˜å…ˆçº§è¶Šé«˜

## ğŸ“ æ–‡ä»¶æ¸…å•

éƒ¨ç½²å·¥å…·ç›®å½• (C:\Users\Admin\Desktop\é‡‡è´­\éƒ¨ç½²å·¥å…·\):

æ ¸å¿ƒè„šæœ¬:
âœ“ ä¸€é”®å®Œæ•´é…ç½®.bat - ç»¼åˆé…ç½®è„šæœ¬ (æ¨èä½¿ç”¨)
âœ“ é…ç½®ç½‘ç»œä¼˜å…ˆçº§.ps1 - ç½‘ç»œå’Œé˜²ç«å¢™é…ç½®
âœ“ ä¿®æ”¹MySQLé…ç½®.ps1 - MySQLé…ç½®æ–‡ä»¶ä¿®æ”¹
âœ“ setup_mysql_local.sql - MySQLåˆå§‹åŒ–SQL
âœ“ create_database.py - Pythonè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
âœ“ test_mysql_connection.py - æ•°æ®åº“è¿æ¥æµ‹è¯•

æ–‡æ¡£:
âœ“ æœ€ç»ˆé…ç½®æ€»ç»“.txt - æœ¬æ–‡ä»¶
âœ“ é…ç½®è¿›åº¦æ€»ç»“.txt - è¯¦ç»†è¿›åº¦
âœ“ å¿«é€Ÿé…ç½®æŒ‡å—.bat - å¿«é€ŸæŒ‡å—
âœ“ README.txt - å®Œæ•´è¯´æ˜

## ğŸ¯ ä¸‹ä¸€æ­¥

1. è¿è¡Œ "ä¸€é”®å®Œæ•´é…ç½®.bat" å®Œæˆæ‰€æœ‰é…ç½®
2. æµ‹è¯•æ•°æ®åº“è¿æ¥
3. å¯åŠ¨BackendæœåŠ¡ (ç¡®ä¿ç›‘å¬ 0.0.0.0:5001)
4. å¯åŠ¨FrontendæœåŠ¡
5. æµ‹è¯•å¤–ç½‘è®¿é—®: http://61.145.212.28:3000

====================================================
é…ç½®å®Œæˆå,ç³»ç»Ÿå°†å¯ä»¥ä»å…¬ç½‘ 61.145.212.28 è®¿é—®!
====================================================
