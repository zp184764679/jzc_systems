==========================================
é‡‡è´­ç³»ç»Ÿè¿ç»´å·¥å…· - ä½¿ç”¨æŒ‡å—
==========================================
ç‰ˆæœ¬ï¼šv3.1 - WSLç”Ÿäº§ç¯å¢ƒ (Ollama 11435ç«¯å£)
æ›´æ–°æ—¶é—´ï¼š2025-11-12 15:31

==========================================
æ ¸å¿ƒæ–‡ä»¶è¯´æ˜
==========================================

â”Œâ”€ é…ç½®æ–‡ä»¶
â”‚  â””â”€ ã€ç”Ÿäº§ç¯å¢ƒã€‘å®Œæ•´systemdé…ç½®.txt  â­å¿…è¯»é…ç½®æŒ‡å—
â”‚
â”œâ”€ è¿›ç¨‹ä¿æŠ¤è„šæœ¬
â”‚  â”œâ”€ æ¸…ç†æ‰€æœ‰è¿›ç¨‹.bat                   è‡ªåŠ¨ä¿æŠ¤WSLè¿›ç¨‹
â”‚  â”œâ”€ å¼ºåˆ¶æ¸…ç†WSLè¿›ç¨‹(éœ€è¦å¯†ç ).bat      å¯†ç ï¼šcaigou2025
â”‚  â”‚
â”‚  â”œâ”€ WSLè¿›ç¨‹å®ˆæŠ¤è€….ps1                  ç›‘æ§è„šæœ¬(å«Ollama)
â”‚  â”œâ”€ å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹.bat                   å¯åŠ¨Windowså®ˆæŠ¤
â”‚  â””â”€ åœæ­¢å®ˆæŠ¤è¿›ç¨‹.bat                   åœæ­¢Windowså®ˆæŠ¤
â”‚
â”œâ”€ Windowsç³»ç»ŸæœåŠ¡
â”‚  â”œâ”€ æ³¨å†ŒWindowsç³»ç»ŸæœåŠ¡.bat           æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡
â”‚  â”œâ”€ æ³¨å†ŒWindowsç³»ç»ŸæœåŠ¡.ps1
â”‚  â””â”€ å¸è½½Windowsç³»ç»ŸæœåŠ¡.bat           å¸è½½ç³»ç»ŸæœåŠ¡
â”‚
â””â”€ æ—¥å¿—æ–‡ä»¶
   â”œâ”€ å®ˆæŠ¤è€…æ—¥å¿—.txt                     å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—
   â”œâ”€ æœåŠ¡æ—¥å¿—.txt                       ç³»ç»ŸæœåŠ¡æ—¥å¿—
   â””â”€ æœåŠ¡é”™è¯¯æ—¥å¿—.txt                   é”™è¯¯æ—¥å¿—

==========================================
æœåŠ¡æ¶æ„ï¼ˆWSLç”Ÿäº§ç¯å¢ƒï¼‰
==========================================

1. Ollama (11435)       â† WSLæœ¬åœ°AIæœåŠ¡ â­WSLä¸“ç”¨ç«¯å£
   â†“
2. Redis (6380)         â† æ¶ˆæ¯é˜Ÿåˆ—
   â†“
3. Backend (5001)       â† Flask + OCRï¼Œä¾èµ–Ollama+Redis
   â†“
4. Celery Worker        â† å¼‚æ­¥ä»»åŠ¡ï¼Œä¾èµ–Ollama+Redis

5. Frontend (5000)      â† Reactç•Œé¢ï¼ˆç‹¬ç«‹ï¼‰

è¯´æ˜ï¼šWSL Ollamaä½¿ç”¨11435ç«¯å£ï¼Œä¸Windows Ollama (11434)å…±å­˜

==========================================
å¿«é€Ÿå¼€å§‹ï¼ˆ10åˆ†é’Ÿé…ç½®ï¼‰
==========================================

æ­¥éª¤1ï¼šé…ç½®systemdæœåŠ¡ï¼ˆ5åˆ†é’Ÿï¼‰
--------------------------------------------
1. æ‰“å¼€ï¼šã€ç”Ÿäº§ç¯å¢ƒã€‘å®Œæ•´systemdé…ç½®.txt
2. å¤åˆ¶é‡Œé¢çš„é…ç½®å‘½ä»¤
3. åœ¨WSLä¸­æ‰§è¡Œï¼ˆéœ€è¦sudoå¯†ç ï¼‰
4. ç­‰å¾…é…ç½®å®Œæˆ

æ­¥éª¤2ï¼šé…ç½®Windowså®ˆæŠ¤æœåŠ¡ï¼ˆ2åˆ†é’Ÿï¼‰
--------------------------------------------
1. åŒå‡»ï¼šæ³¨å†ŒWindowsç³»ç»ŸæœåŠ¡.bat
2. å…è®¸ç®¡ç†å‘˜æƒé™
3. ç­‰å¾…è‡ªåŠ¨å®Œæˆ

æ­¥éª¤3ï¼šéªŒè¯é…ç½®ï¼ˆ3åˆ†é’Ÿï¼‰
--------------------------------------------
åœ¨WSLä¸­è¿è¡Œï¼š
  sudo systemctl status ollama
  sudo systemctl status redis-server
  sudo systemctl status caigou-backend
  sudo systemctl status caigou-frontend
  sudo systemctl status caigou-celery

å…¨éƒ¨æ˜¾ç¤º "Active: active (running)" å³æˆåŠŸ

==========================================
ç”Ÿäº§ç¯å¢ƒ vs å¼€å‘ç¯å¢ƒ
==========================================

ç”Ÿäº§ç¯å¢ƒï¼ˆWSLï¼‰ï¼š
âœ… ä½¿ç”¨WSLæœ¬åœ°Ollama (localhost:11435)
âœ… systemdç®¡ç†æ‰€æœ‰æœåŠ¡
âœ… è‡ªåŠ¨é‡å¯ä¿æŠ¤
âœ… å¼€æœºè‡ªå¯åŠ¨
âœ… ä¸‰å±‚é˜²æŠ¤æœºåˆ¶

å¼€å‘ç¯å¢ƒï¼ˆWindowsï¼‰ï¼š
âš™ï¸ ä½¿ç”¨Windows Ollama (localhost:11434)
âš™ï¸ æ‰‹åŠ¨å¯åŠ¨æœåŠ¡
âš™ï¸ ç”¨äºå¼€å‘è°ƒè¯•
âš™ï¸ çµæ´»é…ç½®

åˆ‡æ¢æ–¹å¼ï¼š
- é€šè¿‡ LLM_BASE ç¯å¢ƒå˜é‡åˆ‡æ¢
- ç”Ÿäº§ï¼šhttp://localhost:11435 (WSL Ollama)
- å¼€å‘ï¼šhttp://localhost:11434 (Windows Ollama)
- ä¸¤ä¸ªOllamaå®ä¾‹å¯åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°

==========================================
ä¸‰å±‚ä¿æŠ¤æœºåˆ¶
==========================================

ç¬¬1å±‚ - è„šæœ¬çº§ä¿æŠ¤
--------------------------------------------
æ¸…ç†æ‰€æœ‰è¿›ç¨‹.bat è‡ªåŠ¨è¯†åˆ«å¹¶ä¿æŠ¤ï¼š
âœ… Ollama (WSL)
âœ… Redis (WSL)
âœ… Backend + OCR (WSL)
âœ… Frontend (WSL)
âœ… Celery (WSL)

ç¬¬2å±‚ - systemdè‡ªåŠ¨é‡å¯
--------------------------------------------
æœåŠ¡è¢«æ€å5ç§’å†…è‡ªåŠ¨é‡å¯ï¼š
âœ… Ollama â†’ Backend/Celeryä¾èµ–å®ƒ
âœ… Redis â†’ Backend/Celeryä¾èµ–å®ƒ
âœ… Backend
âœ… Frontend
âœ… Celery

ç¬¬3å±‚ - Windowså®ˆæŠ¤ç›‘æ§
--------------------------------------------
æ¯10ç§’æ£€æµ‹ä¸€æ¬¡ï¼Œå¼‚å¸¸è‡ªåŠ¨é‡å¯ï¼š
âœ… ç›‘æ§æ‰€æœ‰systemdæœåŠ¡
âœ… æŒç»­å¥åº·æ£€æŸ¥
âœ… è‡ªåŠ¨æ¢å¤å¼‚å¸¸

==========================================
å¸¸ç”¨ç®¡ç†å‘½ä»¤
==========================================

æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š
--------------------------------------------
sudo systemctl status ollama
sudo systemctl status redis-server
sudo systemctl status caigou-backend
sudo systemctl status caigou-frontend
sudo systemctl status caigou-celery

é‡å¯æœåŠ¡ï¼š
--------------------------------------------
sudo systemctl restart ollama
sudo systemctl restart caigou-backend
sudo systemctl restart caigou-frontend
sudo systemctl restart caigou-celery

æŸ¥çœ‹æ—¥å¿—ï¼š
--------------------------------------------
# å®æ—¶æ—¥å¿—
sudo journalctl -u ollama -f
sudo journalctl -u caigou-backend -f

# æ—¥å¿—æ–‡ä»¶
tail -f /var/log/ollama.log
tail -f /var/log/caigou-backend.log

æµ‹è¯•Ollamaï¼š
--------------------------------------------
# WSL Ollama (ç”Ÿäº§)
curl http://localhost:11435/api/tags

# Windows Ollama (å¼€å‘)
curl http://localhost:11434/api/tags

æŸ¥çœ‹ç«¯å£ï¼š
--------------------------------------------
netstat -tlnp | grep -E '11435|6380|5000|5001'

é¢„æœŸç»“æœï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
  11435: ollama serve (WSL)
  6380:  redis-server
  5001:  python (app.py)
  5000:  node (vite)

==========================================
æ•…éšœæ’æŸ¥
==========================================

é—®é¢˜1ï¼šOllamaå¯åŠ¨å¤±è´¥
--------------------------------------------
æ£€æŸ¥ï¼šsudo journalctl -u ollama -n 50
è§£å†³ï¼šç¡®è®¤Ollamaå·²å®‰è£…ï¼šwhich ollama

é—®é¢˜2ï¼šBackendæ— æ³•è¿æ¥Ollama
--------------------------------------------
æ£€æŸ¥ï¼šcurl http://localhost:11434/api/tags
è§£å†³ï¼šç¡®ä¿OllamaæœåŠ¡è¿è¡Œä¸­

é—®é¢˜3ï¼šæœåŠ¡æ— æ³•è‡ªåŠ¨é‡å¯
--------------------------------------------
æ£€æŸ¥ï¼šsystemctl cat caigou-backend
ç¡®è®¤æœ‰ï¼šRestart=always

é—®é¢˜4ï¼šWindowså®ˆæŠ¤è¿›ç¨‹ä¸å·¥ä½œ
--------------------------------------------
æ£€æŸ¥ï¼šGet-Service WSLCaigouGuardian
æŸ¥çœ‹æ—¥å¿—ï¼štype "å®ˆæŠ¤è€…æ—¥å¿—.txt"

==========================================
ç›®å½•ç»“æ„
==========================================

è¿ç»´å·¥å…·/
â”œâ”€â”€ README.txt â­ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ ã€ç”Ÿäº§ç¯å¢ƒã€‘å®Œæ•´systemdé…ç½®.txt â­
â”‚
â”œâ”€â”€ æ¸…ç†æ‰€æœ‰è¿›ç¨‹.bat
â”œâ”€â”€ å¼ºåˆ¶æ¸…ç†WSLè¿›ç¨‹(éœ€è¦å¯†ç ).bat
â”‚
â”œâ”€â”€ WSLè¿›ç¨‹å®ˆæŠ¤è€….ps1
â”œâ”€â”€ å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹.bat
â”œâ”€â”€ åœæ­¢å®ˆæŠ¤è¿›ç¨‹.bat
â”‚
â”œâ”€â”€ æ³¨å†ŒWindowsç³»ç»ŸæœåŠ¡.bat
â”œâ”€â”€ æ³¨å†ŒWindowsç³»ç»ŸæœåŠ¡.ps1
â”œâ”€â”€ å¸è½½Windowsç³»ç»ŸæœåŠ¡.bat
â”‚
â””â”€â”€ *.txt (æ—¥å¿—æ–‡ä»¶)

==========================================
é‡è¦æç¤º
==========================================

1. â­ ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ WSL Ollamaï¼Œä¸è¦ç”¨Windowsçš„
2. âœ… æ‰€æœ‰æœåŠ¡é€šè¿‡ systemd ç®¡ç†ï¼Œæ–¹ä¾¿ç»´æŠ¤
3. ğŸ”’ ä¸‰å±‚ä¿æŠ¤ç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œ
4. ğŸ“ å®šæœŸæŸ¥çœ‹æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
5. ğŸš« ä¸è¦æ‰‹åŠ¨æ€è¿›ç¨‹ï¼Œä½¿ç”¨systemctlç®¡ç†

==========================================
è”ç³»æ–¹å¼
==========================================

ç»´æŠ¤äººï¼šå‘¨é¹
ç”µè¯ï¼š13590217332
é‚®ç®±ï¼šjzchardware@gmail.com

é¡¹ç›®è·¯å¾„ï¼š/home/admin/caigou-prod
è®¿é—®åœ°å€ï¼šhttp://61.145.212.28:5000

==========================================
