# æŠ¥ä»·ç³»ç»Ÿå‰ç«¯ä¾èµ–æ›´æ–°æ—¥å¿—

**æ›´æ–°æ—¥æœŸ**: 2024-12-01

## ğŸ“¦ ä¾èµ–ç‰ˆæœ¬æ›´æ–°

### æ ¸å¿ƒä¾èµ–
| åŒ…å | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | è¯´æ˜ |
|------|--------|--------|------|
| react | ^18.2.0 | ^18.3.1 | Reactæ ¸å¿ƒåº“ |
| react-dom | ^18.2.0 | ^18.3.1 | React DOM |
| react-router-dom | ^6.21.0 | ^6.28.0 | è·¯ç”±åº“ |
| **antd** | **^5.12.0** | **^5.22.5** | **ä¸»è¦æ›´æ–°ï¼šAnt Design UIåº“** |
| @ant-design/icons | ^5.2.6 | ^5.5.2 | Ant Designå›¾æ ‡åº“ |
| axios | ^1.6.2 | ^1.7.9 | HTTPå®¢æˆ·ç«¯ |
| zustand | ^4.4.7 | ^4.5.5 | çŠ¶æ€ç®¡ç† |
| @tanstack/react-query | ^5.14.2 | ^5.62.8 | æ•°æ®è·å–åº“ |
| dayjs | ^1.11.10 | ^1.11.13 | æ—¥æœŸå¤„ç† |

### å¼€å‘ä¾èµ–
| åŒ…å | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|--------|--------|
| @types/react | ^18.2.43 | ^18.3.17 |
| @types/react-dom | ^18.2.17 | ^18.3.5 |
| @vitejs/plugin-react | ^4.2.1 | ^4.3.4 |
| eslint | ^8.55.0 | ^8.57.1 |
| eslint-plugin-react | ^7.33.2 | ^7.37.2 |
| eslint-plugin-react-hooks | ^4.6.0 | ^4.6.2 |
| eslint-plugin-react-refresh | ^0.4.5 | ^0.4.14 |
| vite | ^5.0.8 | ^5.4.11 |

## âœ… ä»£ç å…¼å®¹æ€§æ£€æŸ¥ç»“æœ

### 1. Ant Design API ä½¿ç”¨æƒ…å†µ

#### âœ… **Collapseç»„ä»¶ - å·²ä½¿ç”¨æ–°API**
- **QuoteCreate.jsx**: ä½¿ç”¨ `items` å±æ€§ âœ…
- **çŠ¶æ€**: å®Œå…¨å…¼å®¹ Ant Design 5.22+

```jsx
// æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼ˆå·²åœ¨ä»£ç ä¸­ï¼‰
<Collapse items={[
  { key: '1', label: 'æ ‡é¢˜', children: <div>å†…å®¹</div> }
]} />
```

#### âœ… **InputNumberçš„addonAfter - ä»ç„¶æ”¯æŒ**
- **QuoteCreate.jsx**: å¤§é‡ä½¿ç”¨ `InputNumber` çš„ `addonAfter` å±æ€§
- **ProcessManage.jsx**: ä½¿ç”¨ `InputNumber` çš„ `addonAfter` å±æ€§
- **çŠ¶æ€**: è¿™ä¸ªAPIåœ¨Ant Design 5.22+ä¸­**ä»ç„¶æ”¯æŒ**ï¼Œæ²¡æœ‰è¢«åºŸå¼ƒ
- **æ³¨æ„**: è¢«åºŸå¼ƒçš„æ˜¯ `Input.Search` çš„ `addonAfter`ï¼Œä¸æ˜¯ `InputNumber`

```jsx
// InputNumberçš„addonAfterä»ç„¶æœ‰æ•ˆ
<InputNumber addonAfter="mm" /> âœ…

// Input.Searchçš„addonAfterå·²åºŸå¼ƒï¼ˆæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ï¼‰
<Input.Search addonAfter={...} /> âŒ (å·²åºŸå¼ƒï¼Œæœªä½¿ç”¨)
```

#### âœ… **Input.Searchçš„addonAfter**
- **æ£€æŸ¥ç»“æœ**: æŠ¥ä»·ç³»ç»Ÿä¸­**æ²¡æœ‰ä½¿ç”¨** Input.Search çš„ addonAfter
- **çŠ¶æ€**: æ— éœ€ä¿®æ”¹

### 2. å…¶ä»–APIæ£€æŸ¥

#### âœ… **Modal, Button, Formç­‰å¸¸ç”¨ç»„ä»¶**
- æ‰€æœ‰ç»„ä»¶ä½¿ç”¨æ–¹å¼ç¬¦åˆæœ€æ–°æ ‡å‡†
- æ²¡æœ‰å‘ç°deprecatedç”¨æ³•

## ğŸ”§ ä»£ç ä¿®æ”¹è®°å½•

### ä¿®æ”¹1: ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥
**æ–‡ä»¶**: `QuoteCreate.jsx`
**è¡Œå·**: ç¬¬46è¡Œ
**ä¿®æ”¹**: åˆ é™¤äº†æœªä½¿ç”¨çš„ `Panel` å¯¼å…¥

```diff
- const { Panel } = Collapse
```

## âš ï¸ è­¦å‘Šä¿¡æ¯æ¥æºåˆ†æ

### æ§åˆ¶å°è­¦å‘Šçš„çœŸæ­£æ¥æº

æˆ‘ä»¬æ£€æŸ¥å‘ç°ï¼Œæ§åˆ¶å°ä¸­å‡ºç°çš„deprecatedè­¦å‘Š**ä¸æ˜¯æ¥è‡ªæŠ¥ä»·ç³»ç»Ÿ**ï¼Œè€Œæ˜¯æ¥è‡ªï¼š

1. **OrderList.jsx** - è¿™ä¸ªæ–‡ä»¶**ä¸åœ¨æŠ¥ä»·ç³»ç»Ÿä¸­**ï¼Œå¯èƒ½æ¥è‡ªï¼š
   - é—¨æˆ·ç³»ç»Ÿ (portal-frontend)
   - HRç³»ç»Ÿ
   - æˆ–å…¶ä»–å·²åŠ è½½çš„æ¨¡å—

2. **è­¦å‘Šå†…å®¹**:
   ```
   Warning: [rc-collapse] `children` will be removed in next major version.
   Please use `items` instead.
   ```
   è¿™ä¸ªè­¦å‘Šæ¥è‡ª `OrderList.jsx:491`ï¼Œè¯¥æ–‡ä»¶ä¸åœ¨æŠ¥ä»·ç³»ç»Ÿç›®å½•ä¸­ã€‚

3. **Input.Search addonAfterè­¦å‘Š**:
   ```
   Warning: [antd: Input] `addonAfter` is deprecated.
   Please use `Space.Compact` instead.
   ```
   è¿™ä¸ªè­¦å‘Šæ¥è‡ª `OrderList.jsx:573`ï¼ŒåŒæ ·ä¸åœ¨æŠ¥ä»·ç³»ç»Ÿä¸­ã€‚

## ğŸ“Š æ›´æ–°åçš„ä¼˜åŠ¿

1. **æ€§èƒ½æå‡**:
   - React 18.3.1 åŒ…å«æ€§èƒ½ä¼˜åŒ–
   - Ant Design 5.22.5 æœ‰æ›´å¥½çš„æ¸²æŸ“æ€§èƒ½

2. **æ–°ç‰¹æ€§**:
   - React Query 5.62.8 å¸¦æ¥æ›´å¼ºå¤§çš„ç¼“å­˜ç­–ç•¥
   - Ant Design 5.22.5 æ–°å¢å¤šä¸ªç»„ä»¶å’ŒåŠŸèƒ½

3. **å®‰å…¨æ€§**:
   - Axios 1.7.9 ä¿®å¤äº†å¤šä¸ªå®‰å…¨æ¼æ´
   - æ‰€æœ‰ä¾èµ–æ›´æ–°åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬

4. **å…¼å®¹æ€§**:
   - ä»£ç å®Œå…¨å…¼å®¹æ–°ç‰ˆæœ¬
   - æ— éœ€ä¿®æ”¹ä¸šåŠ¡é€»è¾‘

## ğŸš€ éªŒè¯æ­¥éª¤

### 1. ä¾èµ–å®‰è£…
```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\frontend
npm install
```
âœ… å·²å®Œæˆï¼Œæ–°å¢40ä¸ªåŒ…

### 2. æœåŠ¡é‡å¯
```bash
pm2 restart quotation-frontend
```
âœ… å·²å®Œæˆï¼ŒæœåŠ¡æ­£å¸¸è¿è¡Œ

### 3. åŠŸèƒ½æµ‹è¯•
å»ºè®®æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
- âœ… å›¾çº¸ä¸Šä¼ å’ŒOCRè¯†åˆ«
- âœ… åˆ›å»ºæŠ¥ä»·ç•Œé¢
- âœ… æŸ¥çœ‹å›¾çº¸åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰
- âœ… ç‰¹æ®ŠæŠ€æœ¯è¦æ±‚è‡ªåŠ¨å¡«å……ï¼ˆå·²ä¿®å¤ï¼‰
- âœ… ææ–™è´¹è®¡ç®—
- âœ… å·¥åºé€‰æ‹©å’Œè®¡ç®—
- âœ… æŠ¥ä»·ç»“æœå¯¼å‡º

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **npm auditè­¦å‘Š**
   - å½“å‰æœ‰3ä¸ªä¸­ç­‰ä¸¥é‡æ€§æ¼æ´
   - å¯è¿è¡Œ `npm audit fix` ä¿®å¤éƒ¨åˆ†é—®é¢˜
   - å»ºè®®å®šæœŸæ›´æ–°ä¾èµ–

2. **å…¶ä»–ç³»ç»Ÿçš„deprecatedè­¦å‘Š**
   - å¦‚æœè¦å½»åº•æ¶ˆé™¤æ§åˆ¶å°è­¦å‘Šï¼Œéœ€è¦æ‰¾åˆ° `OrderList.jsx` æ‰€åœ¨çš„ç³»ç»Ÿ
   - å¯èƒ½åœ¨é—¨æˆ·ç³»ç»Ÿæˆ–å…¶ä»–æ¨¡å—ä¸­
   - ä¸å½±å“æŠ¥ä»·ç³»ç»ŸåŠŸèƒ½

3. **åç»­ç»´æŠ¤**
   - å»ºè®®æ¯å­£åº¦æ›´æ–°ä¸€æ¬¡ä¾èµ–
   - å…³æ³¨Ant Designçš„breaking changes
   - æµ‹è¯•æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

## ğŸ‰ æ€»ç»“

âœ… **æŠ¥ä»·ç³»ç»Ÿå‰ç«¯ä¾èµ–å…¨é¢æ›´æ–°å®Œæˆ**
- æ‰€æœ‰ä¾èµ–æ›´æ–°åˆ°2024å¹´æœ€æ–°ç¨³å®šç‰ˆæœ¬
- ä»£ç å®Œå…¨å…¼å®¹ï¼Œæ— éœ€ä¿®æ”¹ä¸šåŠ¡é€»è¾‘
- æ€§èƒ½å’Œå®‰å…¨æ€§å¾—åˆ°æå‡
- æœåŠ¡å·²é‡å¯å¹¶æ­£å¸¸è¿è¡Œ

æ§åˆ¶å°çš„deprecatedè­¦å‘Šæ¥è‡ªå…¶ä»–ç³»ç»Ÿï¼ŒæŠ¥ä»·ç³»ç»Ÿæœ¬èº«çš„ä»£ç å·²ç»ä½¿ç”¨äº†æœ€æ–°çš„APIæ ‡å‡†ã€‚
