# 📖 启动器使用说明 v2.0

## 🎉 更新内容

### ✨ 新功能
- ✅ **隐藏CMD窗口** - 启动前后端时不再显示黑色CMD窗口
- ✅ **独立日志窗口** - 可以分别查看前端和后端的实时日志
- ✅ **日志管理** - 支持清空日志、自动滚动等功能
- ✅ **实时日志捕获** - 所有前后端输出都被捕获并显示

---

## 🚀 快速开始

### 方式一：无CMD窗口启动（推荐）
**双击 `启动器-GUI无窗口.pyw` 文件**
- ✅ 不会显示任何CMD黑窗口
- ✅ 直接显示图形化启动器界面

### 方式二：传统方式启动
**双击 `启动器.bat` 文件**
- ⚠️ 会显示一个CMD窗口（可以最小化）
- ✅ 方便查看启动器本身的错误信息

### 方式三：VBS脚本启动
**双击 `启动器-无窗口.vbs` 文件**
- ✅ 完全隐藏所有窗口
- ✅ 后台静默启动

---

## 📊 界面功能详解

### 🎯 服务状态区域

显示 5 个服务的实时状态：

```
🔴 Redis 数据库      [Port: 6379]  [状态]
🟡 Celery 任务队列   [Port: -   ]  [状态]
🔵 Ollama 大模型     [Port: 11434]  [状态]
🟢 后端 API         [Port: 8000]  [状态] [📋 查看日志]
🟣 前端界面         [Port: 5173]  [状态] [📋 查看日志]
```

**状态指示灯说明：**
- 🟢 **绿色** = 服务运行正常
- 🔴 **红色** = 服务离线/未运行
- 🟡 **橙色** = 状态未知/检测中
- ⚪ **灰色** = 服务已停止

**📋 查看日志按钮：**
- 仅对后端和前端显示
- 点击后弹出独立的日志窗口
- 可以同时查看前后端日志

---

## 📋 日志查看功能

### 如何查看日志？

1. **启动服务后**，点击服务状态右侧的 `📋 查看日志` 按钮
2. **弹出独立窗口**，实时显示该服务的输出
3. **多窗口支持**，可以同时打开前端和后端的日志窗口

### 日志窗口功能

#### 顶部工具栏
```
📋 后端 API - 实时日志    [自动滚动 ☑]  [🗑 清空]
```

- **自动滚动** - 勾选后自动滚动到最新日志
- **🗑 清空** - 清空当前显示的日志

#### 日志内容区域
```
[黑色背景终端风格]
- 白色文字 = 标准输出 (stdout)
- 红色文字 = 错误输出 (stderr)
```

### 日志窗口特点

✅ **实时更新** - 服务输出的内容会立即显示
✅ **颜色区分** - stdout 白色，stderr 红色
✅ **独立窗口** - 可以单独最小化、最大化、关闭
✅ **历史记录** - 保留所有历史日志（直到清空）
✅ **多窗口** - 前后端日志窗口互不影响

---

## 🎮 控制按钮说明

### 主控制区

#### 1. ▶ 启动所有服务
- 一键启动后端 + 前端
- 自动检测依赖服务（Redis、Ollama）
- 显示启动状态和提示信息

#### 2. ⏹ 停止所有服务
- 停止所有正在运行的服务
- 安全关闭，不会强制终止（除非必要）

#### 3. 🔄 刷新状态
- 手动刷新所有服务状态
- 通常会自动每 3 秒刷新一次

### 单独控制按钮

- **启动后端** / **停止后端** - 单独控制后端服务
- **启动前端** / **停止前端** - 单独控制前端服务

### 快捷访问按钮

- **🌐 前端页面** - 在浏览器打开 http://localhost:5173
- **📚 API文档** - 在浏览器打开 http://localhost:8000/docs

---

## 📝 操作日志区域

### 底部日志区域显示：
```
[黑色终端风格]
[14:30:25] 启动器已就绪，等待操作...
[14:30:26] 提示：点击服务状态右侧的「查看日志」按钮可查看前后端详细日志
[14:30:30] 正在启动后端服务...
[14:30:32] 后端服务启动命令已执行，等待服务就绪...
[14:30:32] 提示：点击「查看日志」按钮查看后端详细日志
```

**日志颜色说明：**
- 🟢 **绿色** = 成功信息
- 🟡 **黄色** = 警告信息
- 🔴 **红色** = 错误信息
- ⚪ **灰色** = 时间戳

**操作日志 vs 服务日志：**
- **操作日志**（底部）= 启动器自己的操作记录
- **服务日志**（独立窗口）= 前后端程序的实际输出

---

## ⚙️ 完整使用流程

### 标准启动流程

#### 第一步：启动依赖服务（如需要）

```bash
# 1. 启动 Ollama
ollama serve

# 2. 启动 Redis (使用 Docker)
docker run -d -p 6379:6379 redis
```

#### 第二步：启动启动器

**选择启动方式：**
- 推荐：双击 `启动器-GUI无窗口.pyw`
- 或者：双击 `启动器.bat`
- 或者：双击 `启动器-无窗口.vbs`

#### 第三步：启动服务

1. 点击 `▶ 启动所有服务` 按钮
2. 观察状态指示灯变化
3. 等待指示灯变绿

#### 第四步：查看日志（可选）

1. 点击后端或前端右侧的 `📋 查看日志` 按钮
2. 在弹出窗口中查看详细日志
3. 确认服务正常启动

#### 第五步：开始使用

1. 点击 `🌐 前端页面` 按钮
2. 或直接访问 http://localhost:5173
3. 开始使用系统

### 停止服务

#### 方式一：停止所有服务
1. 点击 `⏹ 停止所有服务` 按钮
2. 等待服务停止完成

#### 方式二：关闭启动器
1. 直接关闭启动器窗口
2. 会提示是否停止服务
3. 选择"确定"后自动停止所有服务

---

## 🔍 常见问题

### Q1: 点击启动后没有CMD窗口，如何确认服务启动？

**A**:
1. 观察状态指示灯：绿色 = 运行中
2. 点击 `📋 查看日志` 查看详细启动信息
3. 查看底部操作日志的提示信息

### Q2: 日志窗口没有内容显示？

**A**: 可能的原因：
- 服务还未启动（先启动服务）
- 服务已崩溃（检查状态指示灯）
- 启动过程中（等待几秒钟）

解决方法：
1. 确认服务状态为"运行中"
2. 关闭日志窗口后重新打开
3. 查看操作日志是否有错误提示

### Q3: 如何同时查看前后端日志？

**A**:
1. 先点击后端的 `📋 查看日志` 按钮
2. 再点击前端的 `📋 查看日志` 按钮
3. 两个窗口会同时显示
4. 可以分别放在屏幕两侧对比查看

### Q4: 日志内容太多，如何清空？

**A**:
- 点击日志窗口顶部的 `🗑 清空` 按钮
- 只清空当前显示，不影响服务运行

### Q5: 关闭日志窗口后能重新打开吗？

**A**:
- 可以，随时点击 `📋 查看日志` 重新打开
- 会显示关闭后到现在的所有日志

### Q6: 启动器.bat 和 启动器-GUI无窗口.pyw 有什么区别？

**A**:
| 特性 | 启动器.bat | 启动器-GUI无窗口.pyw |
|------|-----------|---------------------|
| CMD窗口 | 显示 | 不显示 |
| 启动速度 | 快 | 快 |
| 错误提示 | CMD中显示 | 图形界面显示 |
| 推荐程度 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

### Q7: 服务启动失败，日志显示什么？

**A**: 常见错误：
- **虚拟环境未创建** - 红色错误：未找到虚拟环境
- **依赖未安装** - stderr中显示 ModuleNotFoundError
- **端口被占用** - stderr中显示 Address already in use
- **配置错误** - 查看日志窗口中的具体错误信息

### Q8: 如何调试前后端问题？

**A**:
1. 启动服务
2. 打开对应的日志窗口
3. 取消勾选"自动滚动"
4. 仔细查看红色错误信息
5. 根据错误信息解决问题

---

## 💡 高级技巧

### 1. 多显示器使用

如果有多个显示器：
- 主显示器：启动器主界面
- 副显示器：前端日志窗口
- 副显示器：后端日志窗口

方便同时监控所有服务状态。

### 2. 日志搜索

在日志窗口中：
- 使用 `Ctrl+F` 可以搜索日志内容（部分浏览器支持）
- 或者复制日志到文本编辑器中搜索

### 3. 快速重启服务

如果服务出现问题：
1. 点击对应的"停止"按钮
2. 等待 2-3 秒
3. 再点击"启动"按钮
4. 查看日志确认重启成功

### 4. 设置开机自启动

将 `启动器-GUI无窗口.pyw` 的快捷方式放到：
```
C:\Users\你的用户名\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup
```

---

## 📚 文件说明

| 文件名 | 说明 | 推荐 |
|--------|------|------|
| `launcher.py` | 主程序文件 | - |
| `启动器.bat` | CMD方式启动 | ⭐⭐⭐ |
| `启动器-GUI无窗口.pyw` | 无窗口GUI启动 | ⭐⭐⭐⭐⭐ |
| `启动器-无窗口.vbs` | VBS静默启动 | ⭐⭐⭐⭐ |
| `启动器-无窗口.bat` | BAT无窗口启动 | ⭐⭐⭐⭐ |
| `launcher.pyw` | 系统托盘版（旧版） | ⭐⭐ |
| `requirements.txt` | Python依赖列表 | - |
| `README.md` | 技术文档 | - |
| `使用说明-更新版.md` | 本文件 | - |

---

## 🎯 推荐配置

### 日常开发使用
```
启动方式：启动器-GUI无窗口.pyw
查看日志：需要时点击查看
依赖服务：手动启动 Ollama、Redis
```

### 生产环境使用
```
启动方式：启动器-无窗口.vbs（开机自启动）
查看日志：出问题时查看
依赖服务：设置为系统服务自启动
```

### 调试开发使用
```
启动方式：启动器.bat
查看日志：始终打开前后端日志窗口
依赖服务：手动启动，方便重启
```

---

## 📞 获取帮助

如遇到问题：
1. 查看操作日志（底部）
2. 查看服务日志（点击"查看日志"）
3. 查看 `README.md` 技术文档
4. 检查依赖服务是否运行

---

**祝您使用愉快！** 🎉

最后更新：2025-11
版本：v2.0
