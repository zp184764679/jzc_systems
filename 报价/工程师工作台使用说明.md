# 🔧 工程师紧凑工作台使用说明

## ✅ 已完成的改进

### 1. OCR提示词增强
- **强化特殊要求识别**：明确要求AI完整提取所有技术要求条目
- **改进识别重点**：添加了9大类技术要求的详细说明
- **格式要求**：要求保留原文、按条目换行

### 2. 紧凑工程师界面 (QuoteCreate.jsx)
全新设计的专业工程师工作台，特点：

#### 布局特点
- ✅ **三列紧凑布局**：所有参数一屏显示
- ✅ **小字体(12px)**：信息密度高
- ✅ **小间距(8px)**：紧凑专业
- ✅ **水平标签布局**：节省垂直空间

#### 参数分组
```
┌─────────────┬─────────────┬─────────────┐
│  基本信息    │  尺寸参数    │  报价参数    │
│  +材料       │  +技术要求   │  +备注       │
└─────────────┴─────────────┴─────────────┘
│        特殊技术要求（全宽6行）              │
└─────────────────────────────────────────┘
```

#### 所有可编辑字段

**左列 - 基本信息+材料**
- 图号 ⭐必填
- 客户名称
- 客户料号
- 产品名称
- 材质 ⭐必填
- 重量(g)

**中列 - 尺寸+技术要求**
- 外径(mm) ⭐必填
- 长度(mm) ⭐必填
- 公差（±0.05/IT7/GB/T1804-f）
- 粗糙度（Ra3.2/Ra1.6）
- 热处理（淬火/回火/调质）
- 表面处理（镀锌/发黑/阳极氧化）

**右列 - 报价参数**
- 批量 ⭐必填
- 交期(天)
- 加急程度
- 备注

**底部 - 特殊技术要求**
- 6行等宽字体文本区域
- 使用Consolas字体便于阅读
- 支持多行输入（\\n分隔）
- 预置9条标准格式示例

---

## 🎯 工程师工作流程

### 步骤1：上传图纸
访问：http://localhost:8000/drawings
- 上传PDF图纸
- 系统自动OCR识别

### 步骤2：核对基本参数（紧凑界面）
访问：http://localhost:8000/quotes/create/1

#### 快速检查清单
```
□ 图号是否正确
□ 客户名称、料号是否准确
□ 材质是否识别正确（如SUS303）
□ 外径、长度数值是否准确
□ 公差、粗糙度是否完整
```

### 步骤3：⚠️ 手动补充特殊要求（核心工作）
**OCR识别限制**：小字技术要求可能识别不完整，工程师必须手动核对！

#### 标准格式模板
```
1、材质：SUS303
2、外观平滑，不得有毛刺、锐边
3、未注倒角为C0.5
4、未注圆角为R0.2
5、未注切口粗糙度按Ra3.2
6、未注尺寸公差按GB/T1804-f级
7、未注形位公差按GB/T 1184-1996中H级处理
8、以Ø2.5中心孔为基准做全跳动检测
9、符合欧盟ROHS
```

#### 操作提示
1. **对照PDF原图**：打开原始PDF文件
2. **逐条录入**：复制或手动输入所有技术要求
3. **保持编号**：使用1、2、3...或a、b、c...
4. **每条单独一行**：按Enter键换行
5. **完整准确**：不要省略任何条目

### 步骤4：调整报价参数
- 批量：默认2000件，可修改
- 交期：默认30天
- 加急程度：正常/加急/特急

### 步骤5：一键报价
点击右上角"一键报价"按钮，系统自动计算。

---

## ⚙️ 界面CSS样式说明

### 紧凑样式代码
```css
.compact-form .ant-form-item {
  margin-bottom: 8px;  /* 行间距8px */
}
.compact-form .ant-card-head {
  padding: 8px 12px;  /* 卡片头部紧凑 */
  min-height: 32px;
}
.compact-form .ant-card-body {
  padding: 12px;  /* 卡片内容紧凑 */
}
.compact-form .ant-form-item-label > label {
  font-size: 12px;  /* 标签字体12px */
  font-weight: 600;  /* 加粗便于识别 */
}
.compact-form .ant-input,
.compact-form .ant-input-number,
.compact-form .ant-select-selector {
  font-size: 12px;  /* 输入框字体12px */
}
```

### 特殊要求区域样式
```css
fontFamily: 'Consolas, Monaco, monospace'  /* 等宽字体 */
fontSize: '11px'  /* 小字体 */
lineHeight: '1.6'  /* 合适行高 */
whiteSpace: 'pre-wrap'  /* 保留换行 */
```

---

## 📋 OCR识别能力说明

### 目前能准确识别的字段 (9/13)
✅ 图号（drawing_number）
✅ 客户名称（customer_name）
✅ 产品名称（product_name）
✅ 材质（material）
✅ 外径（outer_diameter）
✅ 长度（length）
✅ 公差（tolerance）
✅ 表面粗糙度（surface_roughness）
⚠️ 特殊要求（special_requirements）- **仅识别部分，需工程师补充**

### 需要工程师手动补充的字段
- ⚠️ **特殊技术要求**：OCR只能识别大字或明显条目，小字密集的技术要求需手动录入
- 客户料号：如果PDF中未明确标注
- 重量：如果PDF中未标注
- 热处理：如果技术要求中未明确说明
- 表面处理：如果技术要求中未明确说明

---

## 🔍 为什么OCR识别不完整？

### 技术限制
1. **PDF格式问题**
   - PDF中的技术要求通常是小字（8-10pt）
   - 可能是扫描件，分辨率不足
   - 文字密集，边界模糊

2. **Vision模型限制**
   - Qwen3-VL适合识别主要元素
   - 对于密集小字表格的识别率较低
   - 需要人工核对确保准确性

3. **工程图纸特点**
   - 技术要求通常在图纸边缘
   - 字体较小，行间距紧凑
   - 包含特殊符号（Φ、Ra、±等）

### 解决方案
✅ **工程师工作台设计理念**：不依赖100%自动化
✅ **人机协作**：OCR识别主要参数，工程师补充细节
✅ **紧凑界面**：所有参数可见可编辑，快速核对
✅ **等宽字体**：技术要求区域使用等宽字体，便于编辑和检查

---

## 💡 使用技巧

### 1. 双屏工作
```
左屏：PDF原图
右屏：紧凑工作台
```
对照PDF逐条核对和录入

### 2. 快捷键
- **Tab**：快速切换字段
- **Ctrl+C/V**：从PDF复制技术要求文本
- **Ctrl+Enter**：提交表单

### 3. 批量处理
如果有多个相似产品：
1. 第一个产品：完整录入所有字段
2. 后续产品：复制特殊要求文本，修改差异部分

### 4. 标准化模板
建立公司标准技术要求模板库：
```
SUS303标准要求.txt
45钢标准要求.txt
6061铝标准要求.txt
```
根据材质快速选用

---

## ⚠️ 注意事项

### 关键检查点
1. **特殊要求必须100%准确**：影响生产工艺和成本计算
2. **公差等级**：±0.05和±0.5差10倍，必须核对
3. **表面粗糙度**：Ra3.2和Ra0.32差10倍，必须核对
4. **认证要求**：ROHS、ISO等必须明确标注

### 常见错误
- ❌ 特殊要求只填"符合欧盟ROHS"就提交
- ❌ 公差、粗糙度数值错误
- ❌ 未注公差处理标准遗漏
- ❌ 检验基准要求遗漏

### 正确做法
- ✅ 对照PDF完整录入所有技术要求
- ✅ 每条要求单独一行
- ✅ 保留原文编号（1、2、3...）
- ✅ 提交前最后检查一遍

---

## 📊 界面对比

### 旧版界面（宽松）
```
行间距：24px
字体：14px
卡片间距：16px
需要滚动：多次
```

### 新版界面（紧凑）
```
行间距：8px  （减少67%）
字体：12px  （减少14%）
卡片间距：12px  （减少25%）
需要滚动：基本无需
```

**信息密度提升**：约 **150%**

---

## 🎯 总结

### 核心改进
1. ✅ **OCR提示词增强**：明确要求完整提取技术要求
2. ✅ **紧凑工程师界面**：所有参数一屏显示，快速编辑
3. ✅ **特殊要求突出显示**：6行文本区域，等宽字体
4. ✅ **专业工作台**：为工程师设计，信息密集不啰嗦

### 使用建议
- **OCR识别**：自动填充主要参数（图号、尺寸、材质）
- **工程师核对**：特殊技术要求必须手动补充完整
- **一键报价**：所有参数确认后快速计算

### 适用场景
✅ **专业工程师**：熟悉技术要求，需要快速录入
✅ **批量报价**：多个产品快速处理
✅ **高精度要求**：每个参数必须人工核对

---

**更新时间**：2025-11-14
**界面版本**：v2.0 紧凑工程师版
**设计理念**：人机协作，专业高效
