# ğŸš€ ç³»ç»Ÿå¯åŠ¨è¯´æ˜

## å½“å‰è¿›åº¦æ€»ç»“

### âœ… å·²å®Œæˆçš„å·¥ä½œ

1. **ç³»ç»Ÿæ¶æ„è®¾è®¡** âœ…
   - å®Œæ•´çš„æŠ€æœ¯æ¶æ„æ–‡æ¡£
   - æ•°æ®åº“è®¾è®¡
   - APIè®¾è®¡è§„èŒƒ
   - è¯¦è§ï¼š`ç³»ç»Ÿæ¶æ„è®¾è®¡.md`

2. **åç«¯åŸºç¡€æ¡†æ¶** âœ…
   - FastAPIæ¡†æ¶æ­å»ºå®Œæˆ
   - SQLAlchemyæ•°æ®åº“ORMé…ç½®
   - é…ç½®ç®¡ç†ç³»ç»Ÿ
   - ç¯å¢ƒå˜é‡ç®¡ç†

3. **æ•°æ®åº“æ¨¡å‹** âœ…
   - ææ–™åº“æ¨¡å‹ (Material)
   - å·¥è‰ºåº“æ¨¡å‹ (Process, CuttingParameter)
   - å›¾çº¸æ¨¡å‹ (Drawing)
   - æŠ¥ä»·æ¨¡å‹ (Quote, QuoteItem, ProcessRoute)

4. **OCRè¯†åˆ«æœåŠ¡** âœ…
   - é›†æˆOllama Vision API
   - æ”¯æŒPDFå’Œå›¾ç‰‡è‡ªåŠ¨è¯†åˆ«
   - æ™ºèƒ½æå–å›¾çº¸ä¿¡æ¯
   - å‚è€ƒé‡‡è´­ç³»ç»ŸæˆåŠŸæ¡ˆä¾‹

5. **åˆå§‹åŒ–æ•°æ®è„šæœ¬** âœ…
   - 10ç§å¸¸ç”¨ææ–™æ•°æ®
   - 10ç§å¸¸è§åŠ å·¥å·¥è‰º
   - 6ç»„åˆ‡å‰Šå‚æ•°é…ç½®

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨OllamaæœåŠ¡

```bash
# ç¡®ä¿Ollamaå·²å®‰è£…å¹¶è¿è¡Œ
ollama serve

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œç¡®è®¤æ¨¡å‹å·²ä¸‹è½½
ollama list
# åº”è¯¥çœ‹åˆ° qwen3-vl:7b

# å¦‚æœæ²¡æœ‰ï¼Œæ‹‰å–æ¨¡å‹
ollama pull qwen3-vl:7b
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…åç«¯ä¾èµ–

```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

```bash
# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œåˆå§‹åŒ–è„šæœ¬
python scripts/init_data.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
====================================================================
ğŸš€ å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“
====================================================================
âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
ğŸ“¦ åˆå§‹åŒ–ææ–™åº“...
  âœ… æ·»åŠ ææ–™: SUS303 - 303ä¸é”ˆé’¢
  âœ… æ·»åŠ ææ–™: SUS304 - 304ä¸é”ˆé’¢
  ...
âœ… ææ–™åº“åˆå§‹åŒ–å®Œæˆï¼Œå…± 10 ç§ææ–™
...
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
# å¯åŠ¨FastAPIæœåŠ¡
python main.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸš€ å¯åŠ¨ æœºåŠ å·¥æŠ¥ä»·ç³»ç»Ÿ v1.0.0
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
```

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **ç³»ç»Ÿä¿¡æ¯**: http://localhost:8000

---

## ğŸ§ª æµ‹è¯•OCRåŠŸèƒ½

åˆ›å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬ `test_ocr.py`:

```python
import sys
sys.path.insert(0, 'C:\\Users\\Admin\\Desktop\\æŠ¥ä»·\\backend')

from services.drawing_ocr_service import get_ocr_service

# è·å–OCRæœåŠ¡
ocr_service = get_ocr_service()

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
if ocr_service.ollama_available:
    print("âœ… OCRæœåŠ¡å°±ç»ª")

    # æµ‹è¯•è¯†åˆ«å®¢æˆ·æ¡ˆä¾‹å›¾çº¸
    pdf_path = r"C:\Users\Admin\Desktop\æŠ¥ä»·\8001-0003095æ»é’è¾Šè½´CPN01802-ä¸é”ˆé’¢æè´¨.pdf"
    print(f"\nğŸ“„ æ­£åœ¨è¯†åˆ«: {pdf_path}")

    result = ocr_service.extract_drawing_info(pdf_path)

    if result.get('success'):
        print("\nâœ… è¯†åˆ«æˆåŠŸï¼")
        print(f"  å›¾å·: {result.get('drawing_number')}")
        print(f"  å®¢æˆ·: {result.get('customer_name')}")
        print(f"  äº§å“åç§°: {result.get('product_name')}")
        print(f"  æè´¨: {result.get('material')}")
        print(f"  å¤–å¾„: {result.get('outer_diameter')}")
        print(f"  é•¿åº¦: {result.get('length')}")
        print(f"  å·¥è‰º: {result.get('processes')}")
    else:
        print(f"\nâŒ è¯†åˆ«å¤±è´¥: {result.get('error')}")
else:
    print("âŒ OCRæœåŠ¡ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥OllamaæœåŠ¡")
```

è¿è¡Œæµ‹è¯•ï¼š
```bash
python test_ocr.py
```

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
C:\Users\Admin\Desktop\æŠ¥ä»·\
â”‚
â”œâ”€â”€ backend/                         # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/                        # APIè·¯ç”±ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ config/                     # é…ç½®
â”‚   â”‚   â”œâ”€â”€ settings.py            # ç³»ç»Ÿè®¾ç½® âœ…
â”‚   â”‚   â”œâ”€â”€ database.py            # æ•°æ®åº“é…ç½® âœ…
â”‚   â”‚   â””â”€â”€ __init__.py            âœ…
â”‚   â”œâ”€â”€ models/                     # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ material.py            # ææ–™åº“ âœ…
â”‚   â”‚   â”œâ”€â”€ process.py             # å·¥è‰ºåº“ âœ…
â”‚   â”‚   â”œâ”€â”€ drawing.py             # å›¾çº¸ âœ…
â”‚   â”‚   â”œâ”€â”€ quote.py               # æŠ¥ä»· âœ…
â”‚   â”‚   â””â”€â”€ __init__.py            âœ…
â”‚   â”œâ”€â”€ services/                   # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ drawing_ocr_service.py # OCRæœåŠ¡ âœ…
â”‚   â”‚   â””â”€â”€ __init__.py            âœ…
â”‚   â”œâ”€â”€ scripts/                    # è„šæœ¬
â”‚   â”‚   â””â”€â”€ init_data.py           # åˆå§‹åŒ–æ•°æ® âœ…
â”‚   â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ __init__.py            âœ…
â”‚   â”œâ”€â”€ uploads/                    # ä¸Šä¼ æ–‡ä»¶ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ main.py                     # FastAPIå…¥å£ âœ…
â”‚   â”œâ”€â”€ requirements.txt            # Pythonä¾èµ– âœ…
â”‚   â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡ âœ…
â”‚   â””â”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹ âœ…
â”‚
â”œâ”€â”€ frontend/                        # å‰ç«¯ä»£ç ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ ç³»ç»Ÿæ¶æ„è®¾è®¡.md                  # æ¶æ„æ–‡æ¡£ âœ…
â”œâ”€â”€ æŠ¥ä»·å…¬å¼.xls                     # æŠ¥ä»·å…¬å¼ âœ…
â”œâ”€â”€ 8001-0003095æ»é’è¾Šè½´...pdf      # æµ‹è¯•æ¡ˆä¾‹ âœ…
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜ âœ…
â””â”€â”€ å¯åŠ¨è¯´æ˜.md                      # æœ¬æ–‡ä»¶ âœ…
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

### 1. åˆ›å»ºå›¾çº¸ç®¡ç†API (ä¼˜å…ˆçº§ï¼šé«˜)
- [ ] POST `/api/drawings/upload` - ä¸Šä¼ å›¾çº¸
- [ ] POST `/api/drawings/{id}/ocr` - è§¦å‘OCRè¯†åˆ«
- [ ] GET `/api/drawings/{id}` - è·å–å›¾çº¸è¯¦æƒ…
- [ ] PUT `/api/drawings/{id}` - æ›´æ–°å›¾çº¸ä¿¡æ¯
- [ ] GET `/api/drawings` - å›¾çº¸åˆ—è¡¨

### 2. åˆ›å»ºææ–™å’Œå·¥è‰ºåº“API (ä¼˜å…ˆçº§ï¼šä¸­)
- [ ] GET `/api/materials` - ææ–™åˆ—è¡¨
- [ ] GET `/api/processes` - å·¥è‰ºåˆ—è¡¨
- [ ] GET `/api/cutting-params` - åˆ‡å‰Šå‚æ•°æŸ¥è¯¢

### 3. å®ç°æŠ¥ä»·è®¡ç®—å¼•æ“ (ä¼˜å…ˆçº§ï¼šé«˜)
- [ ] è§£æExcelæŠ¥ä»·å…¬å¼ï¼ˆåˆ›æ€¡å…´tabï¼‰
- [ ] å®ç°ææ–™æˆæœ¬è®¡ç®—
- [ ] å®ç°åŠ å·¥æˆæœ¬è®¡ç®—
- [ ] å®ç°æ€»ä»·è®¡ç®—

### 4. åˆ›å»ºæŠ¥ä»·API (ä¼˜å…ˆçº§ï¼šé«˜)
- [ ] POST `/api/quotes/calculate` - è®¡ç®—æŠ¥ä»·
- [ ] POST `/api/quotes/{id}/generate-pdf` - ç”ŸæˆPDF
- [ ] POST `/api/quotes/{id}/generate-excel` - ç”ŸæˆExcel

### 5. å¼€å‘å‰ç«¯ç•Œé¢ (ä¼˜å…ˆçº§ï¼šä¸­)
- [ ] å›¾çº¸ä¸Šä¼ é¡µé¢
- [ ] ä¿¡æ¯ç¼–è¾‘é¡µé¢
- [ ] æŠ¥ä»·å•ç”Ÿæˆé¡µé¢
- [ ] å†å²è®°å½•æŸ¥è¯¢

### 6. å®Œå–„åŠŸèƒ½ (ä¼˜å…ˆçº§ï¼šä½)
- [ ] æ™ºèƒ½å·¥è‰ºè·¯çº¿æ¨è
- [ ] æˆæœ¬åˆ†æå›¾è¡¨
- [ ] ç”¨æˆ·æƒé™ç®¡ç†
- [ ] å¯¼å‡ºæŠ¥è¡¨

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: OllamaæœåŠ¡æ— æ³•è¿æ¥
**A**: ç¡®ä¿OllamaæœåŠ¡æ­£åœ¨è¿è¡Œï¼š
```bash
# æ£€æŸ¥OllamaæœåŠ¡
ollama list

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
ollama serve
```

### Q2: æ¨¡å‹ä¸‹è½½å¤±è´¥
**A**: æ‰‹åŠ¨æ‹‰å–æ¨¡å‹ï¼š
```bash
ollama pull qwen3-vl:7b
```

### Q3: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥
**A**: åˆ é™¤æ—§æ•°æ®åº“é‡æ–°åˆå§‹åŒ–ï¼š
```bash
rm quote_system.db
python scripts/init_data.py
```

### Q4: ä¾èµ–å®‰è£…å¤±è´¥
**A**: å°è¯•æ›´æ–°pipåé‡æ–°å®‰è£…ï¼š
```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. OllamaæœåŠ¡æ˜¯å¦è¿è¡Œ
2. Pythonè™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»
3. ä¾èµ–æ˜¯å¦å®Œæ•´å®‰è£…
4. ç«¯å£8000æ˜¯å¦è¢«å ç”¨

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼**
