# ğŸ”§ ç«¯å£é…ç½®è¯´æ˜

## ğŸ“Š æ–°ç«¯å£é…ç½®

| æœåŠ¡ | æ—§ç«¯å£ | æ–°ç«¯å£ | è®¿é—®åœ°å€ |
|------|--------|--------|----------|
| å‰ç«¯ | 5173 | **8000** | http://localhost:8000 |
| åç«¯ | 8000 | **8001** | http://localhost:8001 |
| åç«¯APIæ–‡æ¡£ | - | **8001** | http://localhost:8001/docs |
| åç«¯å¥åº·æ£€æŸ¥ | - | **8001** | http://localhost:8001/health |

## ğŸ“ ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨

### 1. å‰ç«¯é…ç½®æ–‡ä»¶
**æ–‡ä»¶ï¼š** `frontend/vite.config.js`

```javascript
server: {
  port: 8000,  // å‰ç«¯ç«¯å£
  strictPort: true,  // å¦‚æœç«¯å£è¢«å ç”¨åˆ™æŠ¥é”™
  proxy: {
    '/api': {
      target: 'http://localhost:8001',  // åç«¯APIä»£ç†åˆ°8001
      changeOrigin: true,
    },
    '/uploads': {
      target: 'http://localhost:8001',  // ä¸Šä¼ æ–‡ä»¶ä»£ç†åˆ°8001
      changeOrigin: true,
    },
  },
}
```

**ä¿®æ”¹å†…å®¹ï¼š**
- âœ… ç«¯å£ä» 5173 æ”¹ä¸º 8000
- âœ… APIä»£ç†ç›®æ ‡ä» 8000 æ”¹ä¸º 8001
- âœ… ä¸Šä¼ æ–‡ä»¶ä»£ç†ç›®æ ‡ä» 8000 æ”¹ä¸º 8001
- âœ… æ·»åŠ  strictPort: true é˜²æ­¢è‡ªåŠ¨åˆ‡æ¢ç«¯å£

---

### 2. åç«¯é…ç½®æ–‡ä»¶
**æ–‡ä»¶ï¼š** `backend/main.py`

```python
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=8001,  # åç«¯ç«¯å£æ”¹ä¸º8001
        reload=settings.DEBUG
    )
```

**ä¿®æ”¹å†…å®¹ï¼š**
- âœ… ç«¯å£ä» 8000 æ”¹ä¸º 8001

---

### 3. å¯åŠ¨å™¨é…ç½®
**æ–‡ä»¶ï¼š** `å¯åŠ¨å™¨/launcher.py`

**ä¿®æ”¹çš„ä½ç½®ï¼š**

#### 3.1 æœåŠ¡çŠ¶æ€æ˜¾ç¤ºï¼ˆè¡Œ223-224ï¼‰
```python
services = [
    ('redis', 'Redis æ•°æ®åº“', '6379'),
    ('celery', 'Celery ä»»åŠ¡é˜Ÿåˆ—', '-'),
    ('ollama', 'Ollama å¤§æ¨¡å‹', '11434'),
    ('backend', 'åç«¯ API', '8001'),    # æ”¹ä¸º8001
    ('frontend', 'å‰ç«¯ç•Œé¢', '8000')   # æ”¹ä¸º8000
]
```

#### 3.2 å¿«æ·è®¿é—®æŒ‰é’®ï¼ˆè¡Œ364, 373ï¼‰
```python
# å‰ç«¯é¡µé¢æŒ‰é’®
command=lambda: os.system('start http://localhost:8000')  # æ”¹ä¸º8000

# APIæ–‡æ¡£æŒ‰é’®
command=lambda: os.system('start http://localhost:8001/docs')  # æ”¹ä¸º8001
```

#### 3.3 å¥åº·æ£€æŸ¥ï¼ˆè¡Œ506ï¼‰
```python
def check_backend(self):
    """æ£€æŸ¥åç«¯æœåŠ¡"""
    response = requests.get('http://localhost:8001/health', timeout=2)  # æ”¹ä¸º8001
```

#### 3.4 å‰ç«¯ç«¯å£æ£€æŸ¥ï¼ˆè¡Œ513ï¼‰
```python
def check_frontend(self):
    """æ£€æŸ¥å‰ç«¯æœåŠ¡"""
    return self.check_port(8000)  # æ”¹ä¸º8000
```

#### 3.5 å¯åŠ¨æˆåŠŸæç¤ºï¼ˆè¡Œ732-733ï¼‰
```python
self.log("å‰ç«¯åœ°å€: http://localhost:8000", "info")       # æ”¹ä¸º8000
self.log("åç«¯API: http://localhost:8001/docs", "info")  # æ”¹ä¸º8001
```

---

## âœ… æµ‹è¯•ç»“æœ

### å‰ç«¯æµ‹è¯•
```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\frontend
npm run dev
```

**è¾“å‡ºï¼š**
```
VITE v5.4.21 ready in 160 ms
âœ Local:   http://localhost:8000/
```
âœ… **æˆåŠŸå¯åŠ¨åœ¨8000ç«¯å£**

---

### åç«¯æµ‹è¯•
```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\backend
venv\Scripts\python.exe main.py
```

**è¾“å‡ºï¼š**
```
ğŸš€ å¯åŠ¨ æœºåŠ å·¥æŠ¥ä»·ç³»ç»Ÿ v1.0.0
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
INFO: Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
```
âœ… **æˆåŠŸå¯åŠ¨åœ¨8001ç«¯å£**

---

### ç«¯å£ç›‘å¬éªŒè¯
```bash
netstat -ano | findstr ":800"
```

**ç»“æœï¼š**
```
TCP    0.0.0.0:8000    LISTENING    [å‰ç«¯è¿›ç¨‹]
TCP    0.0.0.0:8001    LISTENING    [åç«¯è¿›ç¨‹]
```
âœ… **ç«¯å£ç›‘å¬æ­£å¸¸**

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯åŠ¨å™¨ï¼ˆæ¨èï¼‰
1. åŒå‡» `å¯åŠ¨å™¨/å¯åŠ¨å™¨-GUIæ— çª—å£.pyw`
2. ç‚¹å‡» `â–¶ å¯åŠ¨æ‰€æœ‰æœåŠ¡`
3. ç­‰å¾…çŠ¶æ€æŒ‡ç¤ºç¯å˜ç»¿
4. ç‚¹å‡» `ğŸŒ å‰ç«¯é¡µé¢` æˆ–ç›´æ¥è®¿é—® http://localhost:8000

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

#### å¯åŠ¨åç«¯
```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\backend
venv\Scripts\activate
python main.py
```

#### å¯åŠ¨å‰ç«¯
```bash
cd C:\Users\Admin\Desktop\æŠ¥ä»·\frontend
npm run dev
```

---

## ğŸŒ è®¿é—®åœ°å€

### å‰ç«¯
- **ä¸»é¡µï¼š** http://localhost:8000
- **å¼€å‘ç¯å¢ƒï¼š** çƒ­é‡è½½å·²å¯ç”¨

### åç«¯
- **APIæ–‡æ¡£ï¼ˆSwaggerï¼‰ï¼š** http://localhost:8001/docs
- **APIæ–‡æ¡£ï¼ˆReDocï¼‰ï¼š** http://localhost:8001/redoc
- **å¥åº·æ£€æŸ¥ï¼š** http://localhost:8001/health
- **APIæ ¹è·¯å¾„ï¼š** http://localhost:8001

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç«¯å£å†²çª
å¦‚æœç«¯å£è¢«å ç”¨ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr ":8000"
netstat -ano | findstr ":8001"

# åœæ­¢å ç”¨è¿›ç¨‹ï¼ˆä½¿ç”¨PowerShellï¼‰
Stop-Process -Id [è¿›ç¨‹ID] -Force
```

### 2. å‰ç«¯ä»£ç†é…ç½®
å‰ç«¯çš„ `/api` å’Œ `/uploads` è¯·æ±‚ä¼šè‡ªåŠ¨ä»£ç†åˆ°åç«¯ 8001 ç«¯å£ï¼š
```
http://localhost:8000/api/materials
  â†’ ä»£ç†åˆ° â†’
http://localhost:8001/api/materials
```

### 3. CORSé…ç½®
åç«¯å·²é…ç½®CORSå…è®¸æ‰€æœ‰æ¥æºï¼š
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # å¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦é™åˆ¶
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## ğŸ”„ å›æ»šé…ç½®

å¦‚æœéœ€è¦æ¢å¤åˆ°æ—§çš„ç«¯å£é…ç½®ï¼š

### å‰ç«¯ vite.config.js
```javascript
port: 5173,  // æ¢å¤ä¸º5173
target: 'http://localhost:8000',  // æ¢å¤ä¸º8000
```

### åç«¯ main.py
```python
port=8000,  # æ¢å¤ä¸º8000
```

### å¯åŠ¨å™¨ launcher.py
- æœåŠ¡æ˜¾ç¤ºï¼šbackend='8000', frontend='5173'
- å¿«æ·è®¿é—®ï¼š8000 â†’ 5173
- å¥åº·æ£€æŸ¥ï¼š8001 â†’ 8000
- ç«¯å£æ£€æŸ¥ï¼š8000 â†’ 5173
- æç¤ºä¿¡æ¯ï¼šç›¸åº”ä¿®æ”¹

---

## ğŸ“‹ ä¿®æ”¹åŸå› 

### é—®é¢˜æè¿°
åŸæ¥çš„é…ç½®ï¼š
- å‰ç«¯ vite.config.js è®¾ç½®ç«¯å£ä¸º 8001
- Vite å‘ç° 8001 è¢«å ç”¨ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ° 8004
- å¯åŠ¨å™¨æ£€æŸ¥çš„æ˜¯ 5173 ç«¯å£
- å¯¼è‡´å¯åŠ¨å™¨æ— æ³•æ£€æµ‹åˆ°å‰ç«¯è¿è¡ŒçŠ¶æ€

### è§£å†³æ–¹æ¡ˆ
ç»Ÿä¸€ç«¯å£é…ç½®ï¼š
- å‰ç«¯å›ºå®šåœ¨ 8000
- åç«¯å›ºå®šåœ¨ 8001
- æ·»åŠ  strictPort: true é˜²æ­¢è‡ªåŠ¨åˆ‡æ¢
- å¯åŠ¨å™¨æ£€æŸ¥æ­£ç¡®çš„ç«¯å£

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- **å¯åŠ¨å™¨ä½¿ç”¨è¯´æ˜ï¼š** `å¯åŠ¨å™¨/ä½¿ç”¨è¯´æ˜-æ›´æ–°ç‰ˆ.md`
- **å¿«é€Ÿå‚è€ƒï¼š** `å¯åŠ¨å™¨/å¿«é€Ÿå‚è€ƒ.txt`
- **ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼š** `ç³»ç»Ÿæ¶æ„è®¾è®¡.md`
- **å¯åŠ¨è¯´æ˜ï¼š** `å¯åŠ¨è¯´æ˜.md`

---

**ä¿®æ”¹æ—¥æœŸï¼š** 2025-11-12
**ä¿®æ”¹äººå‘˜ï¼š** Claude Code
**ç‰ˆæœ¬ï¼š** v2.0
